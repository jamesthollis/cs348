<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
  <head>
    <title></title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script type="text/javascript" src="model.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <form>
      <input type="image" id="cart" src="img/cart.png" onclick="window.open('basket.html')"/>
      <!-- <input type="image" class="cart" src="img/home.png" onclick="location.href='eveg.html';" /> -->
      <table>
        <script>
          var productDetails = getProductDetails();
          for (var product in productDetails) {
            document.write('       <tr>\n');
            document.write('         <td><img src="img/' + productDetails[product]["image"] + '" class="produce"/></td>\n');
            document.write('         <td class = "prodName">' + productDetails[product]["name"] + ' </td>\n');
            document.write('         <td>' +'Â£' + productDetails[product]["price"] + '</td>\n');
            document.write('         <td>' + '/ ' + productDetails[product]["units"] + '</td>\n');
            document.write( "<input type='button' value='-' class='qtyminus' field='quant" + productDetails[product]["name"] + "' style='font-weight: bold;' />")
            document.write("<input type='text' name='quant" + productDetails[product]["name"] + "' value='1' class='qty' style='margin-bottom: 0px !important' onkeypress='return event.charCode >= 47 && event.charCode <= 57'/>")
            document.write( "<input type='button' value='+' class='qtyplus' field='quant" + productDetails[product]["name"] + "' style='font-weight: bold;' />")
            document.write('         <td><input name="add' + product + '" type="button" value="add to basket" onclick="javascript:addToBasket(\'' + product + '\', document.getElementById(\'' + product + '\').value)" /></td>\n');
            document.write('       </tr>\n');
            document.write('       <tr>\n');
            document.write('         <td class = "prodeDesc">' + productDetails[product]["description"] + '</td>\n');
            document.write('       </tr>\n');
          }
          jQuery(document).ready(function(){
            $('.qtyplus').click(function(e){
              e.preventDefault();
              fname = $(this).attr('field');
              var val = parseInt($('input[name=' + fname + ']').val());
              if(!isNaN(val)) {
                $('input[name='+fname+']').val(val + 1);
              }
            });
            $('.qtyminus').click(function(e){
              e.preventDefault();
              fname = $(this).attr('field');
              var val = parseInt($('input[name=' + fname + ']').val());
              if(!isNaN(val)) {
                if(val > 0){
                  $('input[name='+fname+']').val(val - 1);
                }
                else {
                  $('input[name='+fname+']').val(0);
                }
              }
            });         
        </script>
      </table>
    </form>

    <div style="position: fixed; bottom: 0; left: 0; right: 0; height: 50px;">
      <form>
        <input type="button" name="homepage" value="Homepage" onclick="location.href='eveg.html';" />
      </form>
    </div>
  </body>
</html>
